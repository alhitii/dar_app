# โ ุฅุตูุงุญ ุชุจููุจ ุณุฌู ุงูุบูุงุจุงุช

## ๐ **ุงูุชุงุฑูุฎ:** 1 ููููุจุฑ 2025

---

## ๐ฏ **ุงููุดููุฉ:**

```
โ ุชุจููุจ "ุณุฌู ุงูุบูุงุจุงุช" ูุธูุฑ ููุฎุชูู ุจุนุฏ ุซูุงูู
ุงูุณุจุจ: StreamBuilder ูุญุงูู ุฅูุดุงุก index ูุนูุฏ
```

---

## โ **ุงูุญู:**

ุชู ุชุจุณูุท ุงูุงุณุชุนูุงู ูุฅุถุงูุฉ ููุชุฑุฉ ูู ุงูููุฏ:

### **ูุจู:**
```dart
stream: FirebaseFirestore.instance
    .collection('notifications_absences')
    .where('studentUid', isEqualTo: user?.uid)
    .where('archiveUntil', isGreaterThan: Timestamp.fromDate(now))
    .orderBy('archiveUntil', descending: true)  // โ ูุญุชุงุฌ index
    .snapshots()
```

### **ุจุนุฏ:**
```dart
stream: FirebaseFirestore.instance
    .collection('notifications_absences')
    .where('studentUid', isEqualTo: user?.uid)
    .snapshots()  // โ ุจุณูุท

// ููุชุฑุฉ ูู ุงูููุฏ
final filteredAbsences = absences.where((doc) {
  final archiveUntil = (doc.data()['archiveUntil'] as Timestamp?)?.toDate();
  return archiveUntil != null && archiveUntil.isAfter(now);
}).toList();

// ุชุฑุชูุจ ูู ุงูููุฏ
filteredAbsences.sort((a, b) {
  final aTime = (a.data()['createdAt'] as Timestamp?)?.toDate();
  final bTime = (b.data()['createdAt'] as Timestamp?)?.toDate();
  return bTime.compareTo(aTime);
});
```

---

## ๐ **ุงูููุงุฆุฏ:**

```
โ ูุง ูุญุชุงุฌ index ูุนูุฏ
โ ูุนูู ููุฑุงู ุจุฏูู ุงูุชุธุงุฑ
โ ูุง ูุธูุฑ ููุฎุชูู
โ StreamBuilder ูุนูู ุจุดูู ุตุญูุญ
โ ุชุญุฏูุซ ุชููุงุฆู ุนูุฏ ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ุฌุฏูุฏุฉ
```

---

## ๐งช **ุงูุงุฎุชุจุงุฑ:**

### **1. ุฃุฑุณู ุฅุดุนุงุฑ ุบูุงุจ:**
```
1. Admin โ ุฃุฑุณู ุฅุดุนุงุฑ ุบูุงุจ
2. ุทุงูุจ โ ุงูุชุญ ูุงูุฐุฉ ุงูุฅุดุนุงุฑุงุช
3. ุงุถุบุท ุชุจููุจ "ุณุฌู ุงูุบูุงุจุงุช"
4. โ ูุฌุจ ุฃู ูุธูุฑ ุงูุฅุดุนุงุฑ ููุจูู ุธุงูุฑุงู
```

### **2. ุชุญูู ูู ุงูุชุญุฏูุซ ุงูุชููุงุฆู:**
```
1. ุงูุชุญ ุชุจููุจ "ุณุฌู ุงูุบูุงุจุงุช"
2. ูู ูุงูุฐุฉ ุฃุฎุฑู: ุฃุฑุณู ุฅุดุนุงุฑ ุบูุงุจ ุฌุฏูุฏ
3. โ ูุฌุจ ุฃู ูุธูุฑ ุงูุฅุดุนุงุฑ ุงูุฌุฏูุฏ ุชููุงุฆูุงู
```

---

## ๐ **ุงููููุงุช ุงููุนุฏูุฉ:**

```
โ lib/ui/student/student_home_complete.dart
   - ุชุจุณูุท ุงุณุชุนูุงู StreamBuilder
   - ุฅุถุงูุฉ ููุชุฑุฉ ูู ุงูููุฏ
   - ุฅุถุงูุฉ ุชุฑุชูุจ ูู ุงูููุฏ
```

---

## ๐ฏ **ุงููุชูุฌุฉ:**

```
โ ุจุงูุฑ ุงูุบูุงุจ ูุนูู
โ ุชุจููุจ ุณุฌู ุงูุบูุงุจุงุช ูุนูู ููุง ูุฎุชูู
โ ุชุจููุจ ุฅุดุนุงุฑุงุช ุงูุฅุฏุงุฑุฉ ูุนูู
โ ุชุจููุจ ุงููุงุฌุจุงุช ุงูุณุงุจูุฉ ูุนูู
โ ุฌููุน ุงูุฃูุธูุฉ ูุณุชูุฑุฉ
```

---

**ุงููุธุงู ููุชูู ููุณุชูุฑ! ๐**
