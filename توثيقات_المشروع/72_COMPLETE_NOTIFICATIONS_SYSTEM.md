# โ ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงููุงูู - ุงูุชูุซูู ุงูููุงุฆู

## ๐ **ุงูุชุงุฑูุฎ:** 1 ููููุจุฑ 2025

---

## ๐ฏ **ููุฎุต ุงูุชุญุฏูุซุงุช:**

ุชู ุฅุตูุงุญ ูุชุญุฏูุซ ูุธุงู ุงูุฅุดุนุงุฑุงุช ุจุงููุงูู ููุดูู:
- โ ุจุงูุฑ ุฅุดุนุงุฑุงุช ุงูุบูุงุจ
- โ ุจุงูุฑ ุฅุดุนุงุฑุงุช ุงูุฅุฏุงุฑุฉ
- โ ุชุจููุจ ุณุฌู ุงูุบูุงุจุงุช
- โ ุชุจููุจ ุฅุดุนุงุฑุงุช ุงูุฅุฏุงุฑุฉ
- โ ุชุจููุจ ุงููุงุฌุจุงุช ุงูุณุงุจูุฉ
- โ ุตูุญุฉ InboxScreen ูููุนูููู ูุงูุทูุงุจ

---

## ๐ **Collections ูู Firestore:**

### **1. notifications_absences:**
```javascript
{
  studentUid: "abc123",
  studentName: "ุงุณู ุงูุทุงูุจ",
  grade: "ุงูุฑุงุจุน",
  section: "ุฃ",
  message: "ุบุงุจ ุงูุทุงูุจ ููู ุงูุฃุญุฏ",
  date: Timestamp,
  createdAt: Timestamp,
  bannerExpiresAt: Timestamp (24 ุณุงุนุฉ),
  archiveUntil: Timestamp (ุณูุฉ),
  read: false,
  type: 'absence'
}
```

### **2. announcements:**
```javascript
{
  title: "ุงุฌุชูุงุน ุฃูููุงุก ุงูุฃููุฑ",
  message: "ููู ุงูุฃุญุฏ ุงูุณุงุนุฉ 10...",
  type: "info" | "success" | "warning" | "error",
  targetRole: "all" | "student" | "teacher",
  isActive: true,
  timestamp: Timestamp,
  bannerExpiresAt: Timestamp (24 ุณุงุนุฉ),
  expiresAt: Timestamp (ุณูุฉ)
}
```

### **3. homework:**
```javascript
{
  teacherId: "xyz789",
  teacherName: "ุฃ : ุณุงุฑุฉ ูุญูุฏ",
  subjectCode: "math_101",
  subjectName: "ุงูุฑูุงุถูุงุช",
  subjectEmoji: "๐ข",
  title: "ุญู ุงูุชูุงุฑูู",
  details: "ุตูุญุฉ 45-50",
  stage: "ุฅุนุฏุงุฏูุฉ",
  grade: "ุงูุฑุงุจุน",
  branch: "ุนููู",
  sections: ["ุฃ", "ุจ"],
  createdAt: Timestamp,
  activeUntil: Timestamp (24 ุณุงุนุฉ),
  archiveUntil: Timestamp (ุณูุฉ),
  dueDate: Timestamp
}
```

---

## ๐ฑ **ูุงุฌูุฉ ุงููุณุชุฎุฏู:**

### **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ููุทุงูุจ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูููู ุงูุดุฎุตู                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ๏ธ ุฅุดุนุงุฑ ุบูุงุจ (ุฃุญูุฑ)               โ
โ ุบุงุจ ุงูุทุงูุจ ููู ุงูุฃุญุฏ...            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โน๏ธ ุงุฌุชูุงุน ุฃูููุงุก ุงูุฃููุฑ (ุฃุฒุฑู)     โ
โ ููู ุงูุฃุญุฏ ุงูุณุงุนุฉ 10...             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ                    โ
โ ๐ข ุงูุฑูุงุถูุงุช | ๐ ุงูุนุฑุจูุฉ ...     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **ูุงูุฐุฉ ุงูุฅุดุนุงุฑุงุช:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [ุงููุงุฌุจุงุช ุงูุณุงุจูุฉ] [ุฅุดุนุงุฑุงุช ุงูุฅุฏุงุฑุฉ] [ุณุฌู ุงูุบูุงุจุงุช] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ **Indexes ุงููุทููุจุฉ:**

### **notifications_absences:**
```
- studentUid (Ascending)
- archiveUntil (Descending)
```

### **homework:**
```
- stage (Ascending)
- grade (Ascending)
- sections (Ascending)
- archiveUntil (Descending)
```

### **announcements:**
```
โ ูุง ูุญุชุงุฌ index (ูุณุชุฎุฏู isActive ููุท)
```

---

## ๐ **ุงููููุงุช ุงููุนุฏูุฉ:**

### **ููุทูุงุจ:**
```
โ lib/ui/student/student_home_complete.dart
   - ุฅุถุงูุฉ ุจุงูุฑ ุงูุบูุงุจ
   - ุฅุถุงูุฉ ุจุงูุฑ ุฅุดุนุงุฑุงุช ุงูุฅุฏุงุฑุฉ
   - ุชุญุฏูุซ ุงูุชุจููุจุงุช ุงูุซูุงุซุฉ
   - ุฑุณุงุฆู ุชุดุฎูุต

โ lib/ui/student/inbox_screen.dart
   - ุฏูุฌ 3 ูุตุงุฏุฑ ููุฅุดุนุงุฑุงุช
   - ููุชุฑุฉ ุญุณุจ ุงูุฏูุฑ
   - ุฑุณุงุฆู ุชุดุฎูุต
```

### **ููุฅุฏุงุฑุฉ:**
```
โ lib/ui/admin/student_absence_management_screen.dart
   - ุชุบููุฑ collection ุฅูู notifications_absences
   - ุชุญุฏูุซ ุงูุญููู

โ lib/ui/admin/send_admin_announcement_screen.dart
   - ุฅุถุงูุฉ bannerExpiresAt
   - ุฅุถุงูุฉ expiresAt
```

### **ูููุนูููู:**
```
โ lib/ui/teacher/teacher_home_complete.dart
   - ุฅุถุงูุฉ activeUntil ูููุงุฌุจุงุช
   - ุฅุถุงูุฉ archiveUntil
   - ุฅุถุงูุฉ subjectName ู subjectEmoji
```

---

## ๐งช **ุงูุงุฎุชุจุงุฑ:**

### **1. ุฅุดุนุงุฑ ุงูุบูุงุจ:**
```
1. Admin โ ุฃุฑุณู ุฅุดุนุงุฑ ุบูุงุจ
2. ุทุงูุจ โ ูุธูุฑ ูู ุงูุจุงูุฑ (24 ุณุงุนุฉ)
3. ุทุงูุจ โ ูุธูุฑ ูู ุชุจููุจ "ุณุฌู ุงูุบูุงุจุงุช" (ุณูุฉ)
```

### **2. ุฅุดุนุงุฑ ุงูุฅุฏุงุฑุฉ:**
```
1. Admin โ ุฃุฑุณู ุชูุจูู ุฅุฏุงุฑู
2. ุทุงูุจ/ูุนูู โ ูุธูุฑ ูู ุงูุจุงูุฑ (24 ุณุงุนุฉ)
3. ุทุงูุจ/ูุนูู โ ูุธูุฑ ูู ุชุจููุจ "ุฅุดุนุงุฑุงุช ุงูุฅุฏุงุฑุฉ" (ุณูุฉ)
4. ุทุงูุจ/ูุนูู โ ูุธูุฑ ูู InboxScreen
```

### **3. ุงููุงุฌุจุงุช:**
```
1. ูุนูู โ ุฃุฑุณู ูุงุฌุจ
2. ุทุงูุจ โ ูุธูุฑ ูู ุชุจููุจ ุงููุงุฏุฉ (24 ุณุงุนุฉ)
3. ุทุงูุจ โ ูุธูุฑ ูู "ุงููุงุฌุจุงุช ุงูุณุงุจูุฉ" (ุณูุฉ)
```

---

## ๐ฏ **ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:**

```
โ ุฌููุน ุงูุจุงูุฑุงุช ุชุนูู
โ ุฌููุน ุงูุชุจููุจุงุช ุชุนูู
โ InboxScreen ูุนูู ููุฌููุน
โ ููุชุฑุฉ ุตุญูุญุฉ ุญุณุจ ุงูุฏูุฑ
โ ููุชุฑุฉ ุตุญูุญุฉ ุญุณุจ ุงูููุช
โ ุฑุณุงุฆู ุชุดุฎูุต ุดุงููุฉ
โ ูุง ุจูุงูุงุช ุซุงุจุชุฉ (hardcoded)
โ ุชุญุฏูุซ ุชููุงุฆู (StreamBuilder)
```

---

## โ๏ธ **ููุงุญุธุงุช ูููุฉ:**

1. **bannerExpiresAt:** ูุฌุจ ุฃู ูููู ูู ุงููุณุชูุจู (24 ุณุงุนุฉ)
2. **archiveUntil/expiresAt:** ูุฌุจ ุฃู ูููู ูู ุงููุณุชูุจู (ุณูุฉ)
3. **targetRole:** ูุฌุจ ุฃู ูุทุงุจู ุฏูุฑ ุงููุณุชุฎุฏู
4. **isActive:** ูุฌุจ ุฃู ูููู true
5. **Indexes:** ูุฌุจ ุฅูุดุงุคูุง ูู Firebase Console

---

**ุงููุธุงู ุฌุงูุฒ ูููุชูู! ๐**
