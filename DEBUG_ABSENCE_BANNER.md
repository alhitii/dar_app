# ๐ ุชุดุฎูุต: ุจุงูุฑ ุงูุบูุงุจ ูุง ูุธูุฑ

## โ๏ธ ุงููุดููุฉ:
**ุจุงูุฑ ุงูุบูุงุจ ูุง ูุธูุฑ ุฃุจุฏุงู ููุทุงูุจ**

---

## ๐ ุฎุทูุงุช ุงูุชุดุฎูุต:

### ุงูุฎุทูุฉ 1: ุชุดุบูู Script ุงููุญุต
```bash
cd d:\test\madrasah
dart run scripts/check_absences.dart
```

**ุณูุธูุฑ ูู:**
```
โ ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ูู absences
โ UID ุงูุทูุงุจ ุงููุชุงุญูู
โ ุนูุฑ ูู ุฅุดุนุงุฑ (ุณุงุนุงุช)
```

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- โ๏ธ Collection `absences` ูุงุฑุบ (ูู ูุชู ุฅุฑุณุงู ุฃู ุฅุดุนุงุฑ)
- โ๏ธ ุงูุฅุดุนุงุฑุงุช ูุฏููุฉ (ุฃูุซุฑ ูู 24 ุณุงุนุฉ)
- โ๏ธ `studentUid` ุบูุฑ ูุชุทุงุจู

---

### ุงูุฎุทูุฉ 2: ุฅุถุงูุฉ ุฅุดุนุงุฑ ุชุฌุฑูุจู
```bash
dart run scripts/add_test_absence.dart
```

**ุณูููู ุจู:**
```
โ ุงูุจุญุซ ุนู ุฃูู ุทุงูุจ
โ ุฅุถุงูุฉ ุฅุดุนุงุฑ ุบูุงุจ ูู
โ ุงูุชุญูู ูู ุงูุฅุถุงูุฉ
```

---

### ุงูุฎุทูุฉ 3: ุชุดุบูู ุงูุชุทุจูู ููุฑุงูุจุฉ Console
```bash
flutter run
# ุงุฎุชุฑ Windows
```

**ูู DEBUG CONSOLEุ ูุฌุจ ุฃู ุชุฑู:**
```
๐ AbsenceBanner - ุงูุชุญูู ูู ุงูุบูุงุจ:
   UID ุงูุญุงูู: abc123xyz
   ๐ ุญุงูุฉ Stream:
      hasData: true
      docs count: 1
   โ ุชู ุงูุนุซูุฑ ุนูู 1 ุฅุดุนุงุฑ ุบูุงุจ
   ๐ ุงูููุช ุงูุญุงูู: 2025-10-27...
      - ุฅุดุนุงุฑ: ุชู ุชุณุฌูู ุบูุงุจู...
        createdAt: Timestamp(...)
        ุงูุนูุฑ: 0 ุณุงุนุฉ
        โ ูุจูู (ุฃูู ูู 24 ุณุงุนุฉ)
   ๐ ุงูุฅุดุนุงุฑุงุช ุงูููุจููุฉ: 1
   ๐ ุนุฑุถ 1 ุจุงูุฑ ุบูุงุจ
```

---

## ๐ ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ:

### โ ุฎุทุฃ 1: UID null
```
๐ AbsenceBanner - ุงูุชุญูู ูู ุงูุบูุงุจ:
   UID ุงูุญุงูู: null
   โ UID null - ูู ูุธูุฑ ุงูุจุงูุฑ
```

**ุงูุณุจุจ:** ุงูุทุงูุจ ุบูุฑ ูุณุฌู ุฏุฎูู ุฃู ููุงู ูุดููุฉ ูู Auth

**ุงูุญู:**
```
1. ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจ ุทุงูุจ
2. ูู Consoleุ ูุฌุจ ุฃู ุชุฑู:
   โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ ูู Auth
      UID: abc123xyz
```

---

### โ ุฎุทุฃ 2: ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช
```
   โน๏ธ ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุบูุงุจ ููุฐุง ุงูุทุงูุจ
```

**ุงูุณุจุจ:** ูู ูุชู ุฅุฑุณุงู ุฅุดุนุงุฑ ุบูุงุจ ููุฐุง ุงูุทุงูุจ

**ุงูุญู:**
```
1. ุดุบูู script: dart run scripts/add_test_absence.dart
2. ุฃู ุฃุฑุณู ุฅุดุนุงุฑ ูู ุงูุชุทุจูู:
   Admin โ ุฅุฑุณุงู ุฅุดุนุงุฑ ุบูุงุจ โ ุงุฎุชุฑ ุงูุทุงูุจ
```

---

### โ ุฎุทุฃ 3: UID ุบูุฑ ูุชุทุงุจู
```
   docs count: 0
   โน๏ธ ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุบูุงุจ ููุฐุง ุงูุทุงูุจ
```

**ุงูุณุจุจ:** UID ุงูุทุงูุจ ูู `absences` ูุง ูุทุงุจู UID ุงูุญุงูู

**ุงูุชุญูู:**
```
1. ูู Console ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู:
   UID: abc123xyz  โ ุงูุณุฎ ูุฐุง

2. ูู Firebase Console:
   Firestore โ absences โ [Document]
   studentUid: "abc123xyz"  โ ูุฌุจ ุฃู ูุทุงุจู!
```

**ุงูุญู:**
```
ุฅุฐุง ูู ูุชุทุงุจู:
1. ุงุญุฐู ุงูุฅุดุนุงุฑ ุงููุฏูู ูู Firebase Console
2. ุฃุฑุณู ุฅุดุนุงุฑ ุฌุฏูุฏ ูู ุงูุชุทุจูู
```

---

### โ ุฎุทุฃ 4: ุงูุฅุดุนุงุฑ ูุฏูู
```
      - ุฅุดุนุงุฑ: ุชู ุชุณุฌูู ุบูุงุจู...
        ุงูุนูุฑ: 48 ุณุงุนุฉ
        โ ุฑูุถ (ุฃูุซุฑ ูู 24 ุณุงุนุฉ)
   โน๏ธ ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุญุฏูุซุฉ (ุฃูู ูู 24 ุณุงุนุฉ)
```

**ุงูุณุจุจ:** ุงูุฅุดุนุงุฑ ุนูุฑู ุฃูุซุฑ ูู 24 ุณุงุนุฉ

**ุงูุญู:**
```
1. ุฃุฑุณู ุฅุดุนุงุฑ ุฌุฏูุฏ
2. ุฃู ุนุฏูู createdAt ูู Firebase Console:
   - Firestore โ absences โ [Document]
   - createdAt โ Edit โ [ุงูููุช ุงูุญุงูู]
```

---

## โ ุงูุญู ุงููุงูู:

### 1. ุชุฃูุฏ ูู ูุฌูุฏ ุฅุดุนุงุฑ ุญุฏูุซ
```bash
# ูุญุต ุงูุฅุดุนุงุฑุงุช ุงูุญุงููุฉ
dart run scripts/check_absences.dart

# ุฅุถุงูุฉ ุฅุดุนุงุฑ ุฌุฏูุฏ
dart run scripts/add_test_absence.dart
```

### 2. ุณุฌู ุฏุฎูู ุจุญุณุงุจ ุงูุทุงูุจ
```
Email: [email ุงูุทุงูุจ ูู script]
Password: 123456 (ุฃู ูููุฉ ุงููุฑูุฑ)
```

### 3. ุฑุงูุจ Console
```
ูุฌุจ ุฃู ุชุฑู:
โ UID ุงูุญุงูู: abc123xyz
โ docs count: 1
โ ุงูุนูุฑ: 0 ุณุงุนุฉ
โ ูุจูู (ุฃูู ูู 24 ุณุงุนุฉ)
๐ ุนุฑุถ 1 ุจุงูุฑ ุบูุงุจ
```

### 4. ูุฌุจ ุฃู ูุธูุฑ ุงูุจุงูุฑ
```
๐ด๐ฅ ุจุงูุฑ ุฃุญูุฑ ูููุช ูู ุฃุนูู ุงูุดุงุดุฉ
โ๏ธ ุชูุจูู ุบูุงุจ
๐ ุชู ุชุณุฌูู ุบูุงุจู ุงูููู...
```

---

## ๐ง ุฎุทูุงุช ุฅุถุงููุฉ:

### ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

#### A. ุงูุชุญูู ูู Firestore Rules
```javascript
// ูู Firebase Console โ Firestore โ Rules
match /absences/{document} {
  allow read: if request.auth != null;  // โ ูุฌุจ ุฃู ูููู ููุฌูุฏุงู
  allow write: if request.auth != null;
}
```

#### B. ุงูุชุญูู ูู home_screen.dart
```dart
// ูู home_screen.dart
// ูุฌุจ ุฃู ูููู:
AbsenceBanner(),  // โ ููุฌูุฏ

// ูููุณ:
// AbsenceBanner(),  // โ ูุนููู
```

#### C. Hard Reload
```
ูู VS Code:
Shift + F5  (Stop)
F5          (Start)
```

---

## ๐ ุงูุฎูุงุตุฉ:

### ุงููุดููุฉ ุนุงุฏุฉ ุชููู ูุงุญุฏุฉ ูู:

1. โ ูุง ููุฌุฏ ุฅุดุนุงุฑ ูู `absences` collection
   โ **ุงูุญู:** ุดุบูู `add_test_absence.dart`

2. โ UID ุบูุฑ ูุชุทุงุจู
   โ **ุงูุญู:** ุฃุฑุณู ุฅุดุนุงุฑ ุฌุฏูุฏ ูู ุงูุชุทุจูู

3. โ ุงูุฅุดุนุงุฑ ูุฏูู (ุฃูุซุฑ ูู 24 ุณุงุนุฉ)
   โ **ุงูุญู:** ุฃุฑุณู ุฅุดุนุงุฑ ุฌุฏูุฏ

4. โ ุงูุทุงูุจ ุบูุฑ ูุณุฌู ุฏุฎูู
   โ **ุงูุญู:** ุณุฌู ุฏุฎูู ุจุญุณุงุจ ุทุงูุจ

---

## ๐ฏ ุงูุชููุน ุงูุตุญูุญ:

ุจุนุฏ ุชุทุจูู ุงูุญูููุ ูุฌุจ ุฃู ุชุฑู ูู Console:

```
๐ AbsenceBanner - ุงูุชุญูู ูู ุงูุบูุงุจ:
   UID ุงูุญุงูู: SOMvmTXdaCQ4ur4OH4ueUDu8vot1
   ๐ ุญุงูุฉ Stream:
      hasData: true
      docs count: 1
   โ ุชู ุงูุนุซูุฑ ุนูู 1 ุฅุดุนุงุฑ ุบูุงุจ
   ๐ ุงูููุช ุงูุญุงูู: 2025-10-27 04:10:00.000
      - ุฅุดุนุงุฑ: ุชู ุชุณุฌูู ุบูุงุจู ุงูููู...
        createdAt: Timestamp(seconds=1730000000, nanoseconds=0)
        ุงูุนูุฑ: 0 ุณุงุนุฉ
        โ ูุจูู (ุฃูู ูู 24 ุณุงุนุฉ)
   ๐ ุงูุฅุดุนุงุฑุงุช ุงูููุจููุฉ: 1
   ๐ ุนุฑุถ 1 ุจุงูุฑ ุบูุงุจ
```

**ููู ุงูุชุทุจูู:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ด๐ฅ ุจุงูุฑ ุฃุญูุฑ ูููุช ูููุธุฑ! ๐ฅ๐ด โ
โ  โ๏ธ ุชูุจูู ุบูุงุจ              ๐  โ
โ  ุชู ุชุณุฌูู ุบูุงุจู ุงูููู...        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

**๐ ุงุจุฏุฃ ุจุชุดุบูู `check_absences.dart` ุงูุขู!**
