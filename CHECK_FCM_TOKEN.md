# ๐ ูุญุต FCM Token - ุฎุทูุงุช ุงูุชุดุฎูุต

## ๐ **ุงูุฎุทูุฉ 1: ุชุญูู ูู FCM Token ูู Firestore**

### **ุงูุทุฑููุฉ 1: ูู Firebase Console**
```
1. ุงูุชุญ Firebase Console
2. ุงุฐูุจ ุฅูู Firestore Database
3. ุงูุชุญ collection: users
4. ุงูุชุญ document ุงูุทุงูุจ (UID ุงูุทุงูุจ)
5. ุงุจุญุซ ุนู field: fcmToken
6. ุฅุฐุง ูุงู ููุฌูุฏ โ
   ุฅุฐุง ูุงู null ุฃู ุบูุฑ ููุฌูุฏ โ
```

---

### **ุงูุทุฑููุฉ 2: ูู ุงูุชุทุจูู (ุตูุญุฉ ุงูุงุฎุชุจุงุฑ)**
```
1. ุงูุชุญ ุงูุชุทุจูู
2. ุณุฌูู ุฏุฎูู ูู ุฅุฏุงุฑู
3. ุงุถุบุท ๐ (ุฒุฑ ุงูุงุฎุชุจุงุฑ - ุฅุฐุง ูุงู ููุฌูุฏ)
4. ุงูุณุฎ FCM Token
5. ุงูุชุญ Firebase Console โ Firestore โ users
6. ุชุญูู ุฅุฐุง ูุงู ููุณ Token ููุฌูุฏ ูู document ุงูุทุงูุจ
```

---

## ๐ **ุงูุฎุทูุฉ 2: ุชุญูู ูู Cloud Function Logs**

```
1. ุงูุชุญ Firebase Console
2. ุงุฐูุจ ุฅูู Functions
3. ุงูุชุญ Logs
4. ุงุจุญุซ ุนู:
   "notifyStudentsOnHomework"
5. ุชุญูู ูู ุงูุฑุณุงุฆู:
   โ "Homework notifications: X success, Y failed"
   โ "No FCM tokens found"
   โ ุฃู error
```

---

## ๐ **ุงูุฎุทูุฉ 3: ุชุญูู ูู ุจูุงูุงุช ุงููุงุฏุฉ ูุงูุทุงูุจ**

### **ุชุญูู ูู ุงููุงุฏุฉ:**
```
1. Firebase Console โ Firestore โ subjects
2. ุงูุชุญ ุงููุงุฏุฉ
3. ุชุญูู ูู:
   - grade: "ุงูุฃูู" (ูุซูุงู)
   - section: "ุฃ" (ูุซูุงู)
```

### **ุชุญูู ูู ุงูุทุงูุจ:**
```
1. Firebase Console โ Firestore โ users
2. ุงูุชุญ ุงูุทุงูุจ
3. ุชุญูู ูู:
   - role: "student"
   - grade: "ุงูุฃูู" (ูุฌุจ ุฃู ูุทุงุจู ุงููุงุฏุฉ)
   - section: "ุฃ" (ูุฌุจ ุฃู ูุทุงุจู ุงููุงุฏุฉ)
   - fcmToken: "eFv9k3tn..." (ูุฌุจ ุฃู ูููู ููุฌูุฏ)
```

---

## ๐ **ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ูุฏูู**

### **ุฃุฑุณู ุฅุดุนุงุฑ ูู Firebase Console:**
```
1. Firebase Console โ Cloud Messaging
2. Create notification
3. Title: ุงุฎุชุจุงุฑ
4. Body: ูู ูุตูุ
5. Target: FCM registration token
6. ุงูุตู FCM Token ุงูุทุงูุจ
7. Additional options:
   - Sound: Enabled
   - Channel: high_importance_channel
8. Publish
9. ุงูุชุธุฑ... ูู ูุตูุ
```

---

## ๐๏ธ **ุงูุญููู ุงููุญุชููุฉ:**

### **ุญู 1: ุฅุนุงุฏุฉ ุจูุงุก APK**
```bash
cd d:\test\madrasah
flutter clean
flutter pub get
flutter build apk --release
```
**ุซู ุซุจูุช APK ุงูุฌุฏูุฏ ูุณุฌูู ุฏุฎูู ุงูุทุงูุจ ูุฑุฉ ุฃุฎุฑู**

---

### **ุญู 2: ุฅุนุงุฏุฉ ุชุณุฌูู ุฏุฎูู ุงูุทุงูุจ**
```
1. ุงูุชุญ ุงูุชุทุจูู
2. ุณุฌูู ุฏุฎูู ูู ุงูุทุงูุจ
3. ุงูุชุธุฑ 3 ุซูุงูู
4. ุชุญูู ูู Firebase Console โ users โ [uid] โ fcmToken
5. ูุฌุจ ุฃู ูุธูุฑ token ุฌุฏูุฏ
```

---

### **ุญู 3: ุชุญุฏูุซ FCM Token ูุฏููุงู (ูุคูุช ููุงุฎุชุจุงุฑ)**
```
1. ุงูุชุญ Firebase Console โ Firestore
2. ุงุฐูุจ ุฅูู users โ [uid ุงูุทุงูุจ]
3. ุฃุถู field ุฌุฏูุฏ:
   - ุงุณู: fcmToken
   - ููุน: string
   - ูููุฉ: [ุงูุตู FCM Token ูู ุตูุญุฉ ุงูุงุฎุชุจุงุฑ]
4. Save
5. ุฌุฑุจ ุฅุถุงูุฉ ูุงุฌุจ
```

---

## ๐ **ุณููุงุฑูููุงุช ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ:**

| ุงููุดููุฉ | ุงูุณุจุจ | ุงูุญู |
|---------|-------|------|
| ูุง ููุฌุฏ fcmToken ูู users | ูู ูุชู ุจูุงุก APK ุฌุฏูุฏ | ุงุจูู APK ุฌุฏูุฏ |
| fcmToken = null | ูู ูุณุฌู ุงูุทุงูุจ ุฏุฎูู | ุณุฌูู ุฏุฎูู ุงูุทุงูุจ |
| grade ูุง ูุทุงุจู | ุงูุทุงูุจ ูู ุตู ูุฎุชูู | ุชุญูู ูู ุงูุตู ูุงูุดุนุจุฉ |
| Cloud Function ูู ุชูุทููู | ุฎุทุฃ ูู ุงูุชุดุบูู | ุงูุญุต Logs |
| Token ููุฌูุฏ ููู ูุง ุฅุดุนุงุฑ | ูุดููุฉ ูู ุงูุฃุฐููุงุช | ุงูุญุต ุฅุนุฏุงุฏุงุช ุงููุงุชู |

---

## ๐งช **ุงุฎุชุจุงุฑ ุณุฑูุน:**

### **ุงูุฃูุฑ ุงูุชุงูู ููุญุต ุฅุฐุง ูุงู FCM Token ูุญููุธ:**

**ูู Terminal ูู ุงูุชุทุจูู (ุนูุฏ ุชุณุฌูู ุฏุฎูู ุงูุทุงูุจ):**
```
ุงุจุญุซ ุนู:
"๐ FCM Token: eFv9k3tn..."
"โ ุชู ุญูุธ ุงูุจูุงูุงุช ูู users (ูุน FCM Token)"
```

**ุฅุฐุง ุธูุฑุช ูุฐู ุงูุฑุณุงุฆู โ**
**ุฅุฐุง ูู ุชุธูุฑ โ - ุงููุดููุฉ ูู auth_service.dart ุฃู APK ูุฏูู**

---

## ๐ **ุฅุฐุง ุฌุฑุจุช ูู ุดูุก ููู ูุนูู:**

**ุฃุฎุจุฑูู:**
1. ูู ุจููุช APK ุฌุฏูุฏุ
2. ูู ุณุฌูู ุงูุทุงูุจ ุฏุฎููุ
3. ูู fcmToken ููุฌูุฏ ูู Firestoreุ
4. ูุงุฐุง ุชููู Cloud Function Logsุ
5. ูู ุงูุตู ูุงูุดุนุจุฉ ูุทุงุจูุงูุ

**ูุณุฃุณุงุนุฏู ูู ุงูุชุดุฎูุต ุงูุฏููู!** ๐
